@use "@/util/theme";
@use "./icon-button";

@mixin action-hover {
  &[data-hovered],
  &[data-focused],
  &[data-pressed] {
    --hover-color: var(--outer);
    --focus-color: var(--outer);
    --pressed-color: var(--outer);

    --outer: var(--yellow-hover2);
    --mid: var(--yellow-hover3);
    --bg: var(--yellow-hover4);
    --card-text-rgb: var(--yellow-hover-dark-rgb);

    @content;
    &.card--inverse {
      --outer: var(--yellow-hover4);
      --mid: var(--yellow-hover2);
      --bg: var(--yellow-hover1);
      --card-text-rgb: var(--yellow-hover-light-rgb);
    }
  }
}

$hover-time: 0.2s;

%beforeBg {
  content: "";
  position: absolute;
  background-color: var(--mid);
  top: 2px;
  bottom: 2px;
  left: 8px;
  right: 8px;
  border-radius: 14px;
  transition: background-color $hover-time;
}

.card {
  --outer: var(--yellow2);
  --mid: var(--yellow3);
  --bg: var(--yellow4);
  --card-text-rgb: var(--yellow-dark-rgb);
  --card-text: rgb(var(--card-text-rgb));
  display: flex;
  flex-direction: column;
  background-color: var(--outer);
  color: var(--card-text);
  border-radius: 12px;
  position: relative;
  &--inverse {
    --outer: var(--yellow4);
    --mid: var(--yellow2);
    --bg: var(--yellow1);
    --card-text-rgb: var(--yellow-light-rgb);
  }
  &--success {
    --outer: var(--green2);
    --mid: var(--green3);
    --bg: var(--green4);
    --card-text-rgb: var(--green-dark-rgb);
  }
  &--warning {
    --outer: var(--orange4);
    --mid: var(--orange5);
    --bg: var(--orange6);
    --card-text-rgb: var(--orange-dark-rgb);
  }
  &--error {
    --outer: var(--red2);
    --mid: var(--red3);
    --bg: var(--red4);
    --card-text-rgb: var(--red-dark-rgb);
  }
  &--info {
    --outer: var(--blue3);
    --mid: var(--blue4);
    --bg: var(--blue5);
    --card-text-rgb: var(--blue-dark-rgb);
  }
  &--with-bg {
    &::before {
      @extend %beforeBg;
    }
  }
  &__bg,
  &__section__bg {
    background-color: var(--bg);
    position: absolute;
    top: 4px;
    bottom: 4px;
    left: 16px;
    right: 16px;
    border-radius: 16px;
    transition: background-color $hover-time;
  }
  &__content,
  &__section-content {
    position: relative;
  }
  &__section {
    position: relative;
    padding: 4px 16px;
    background-color: var(--outer);
    color: var(--card-text);
    border-radius: 12px;
    transition:
      background-color $hover-time,
      color $hover-time;
    &::before {
      @extend %beforeBg;
    }
    &--primary-action {
      color: unset;
      @at-root button#{&} {
        appearance: none;
        border: none;
        &:focus {
          outline: none;
        }
      }
      @include action-hover;
    }
    &--actions {
      padding: 8px 16px;
      gap: 8px;
      .card__section-content {
        display: flex;
        align-items: center;
        gap: 8px;
        min-height: theme.to-rem(52px - 8px);
      }
    }
  }
  &__action-icons {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    flex-grow: 1;
  }
  &__action-buttons {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-grow: 1;
  }
  &__action {
    &--icon {
      margin: theme.to-rem(-6px) 0;
    }
  }
}
